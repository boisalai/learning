<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calculateur Fiscal</title>
    <!-- Seul le script du modèle est nécessaire -->
    <script type="text/javascript" src="script/jquery.min.js"></script>
    <script type="text/javascript" src="script/revenu-disponible_dec2023.js"></script>
    <script type="text/javascript" src="script/francais.js"></script>
    <script type="text/javascript" src="script/commun.js"></script>
    <script>
        function recalc_typerevenu(){
            var situation = document.getElementById("Situation").value.toLowerCase();
            var travail   = document.querySelectorAll('.travail');
            var retraite  = document.querySelectorAll('.retraite');
            var couple    = document.querySelectorAll('.couple');
            var seul      = document.querySelectorAll('.seul');
            var enfants   = document.querySelectorAll('.enfants');
            
            if(situation.indexOf("retraité") == -1){
                for(var i=0,len=travail.length;i<len;i++){
                    travail[i].style.display= '';
                }
                for(var i=0,len=retraite.length;i<len;i++){
                    retraite[i].style.display= 'none';
                }			
            } else {
                if (document.getElementById("AgeAdulte1").value < 65){
                    document.getElementById("AgeAdulte1").value = 65;
                    recalc_onclick('AgeAdulte1')
                } 
                if (document.getElementById("AgeAdulte2").value < 65){
                    document.getElementById("AgeAdulte2").value = 65;
                    recalc_onclick('AgeAdulte2')
                } 
                
                for(var i=0,len=travail.length;i<len;i++){
                    travail[i].style.display= 'none';
                }
                for(var i=0,len=retraite.length;i<len;i++){
                    retraite[i].style.display= '';
                }	
            }

            if(situation.indexOf("retraité") >= 0 || situation.indexOf("person") >= 0){
                document.getElementById("NbEnfants").selectedIndex = 0;
                recalc_onclick('NbEnfants');
                
                for(var i=0,len=enfants.length;i<len;i++){
                    enfants[i].style.display= 'none';
                }			
            } else {
                for(var i=0,len=enfants.length;i<len;i++){
                    enfants[i].style.display= '';
                }		
            }
            
            if(situation.indexOf("couple") == -1){
                for(var i=0,len=seul.length;i<len;i++){
                    seul[i].style.display= '';
                }
                for(var i=0,len=couple.length;i<len;i++){
                    couple[i].style.display= 'none';
                }			
            } else {
                for(var i=0,len=seul.length;i<len;i++){
                    seul[i].style.display= 'none';
                }
                for(var i=0,len=couple.length;i<len;i++){
                    couple[i].style.display= '';
                }	
            }		
        }	  

        function recalc_NbEnfants(){	
            var nbEnfants = document.getElementById("NbEnfants").selectedIndex;
            var enfants   = new Array(	document.querySelectorAll('.enfant1'),
                                        document.querySelectorAll('.enfant2'),
                                        document.querySelectorAll('.enfant3'),
                                        document.querySelectorAll('.enfant4'),
                                        document.querySelectorAll('.enfant5'));
                                        
            for(var i=0,len=enfants.length;i<len;i++){
                if (i < nbEnfants)
                    for(var j=0,len_j=enfants[i].length;j<len_j;j++){
                        enfants[i][j].style.display= '';
                    }
                else 
                    for(var j=0,len_j=enfants[i].length;j<len_j;j++){
                        enfants[i][j].style.display= 'none';
                    }
            }
        }		
	
        document.addEventListener("DOMContentLoaded", function(event) {
            recalc_onclick("");
            recalc_typerevenu();
            recalc_NbEnfants(); 
        });

    </script>
</head>
<body>
    <div class="span23">
        <select name='Situation' id='Situation' class="selectDesign styleDesign largeurChamps" onchange="recalc_onclick('Situation');recalc_typerevenu();recalc_NbEnfants();">
            <option  data-value="s:Personne vivant seule" selected >Personne vivant seule</option>
                <option  data-value="s:Famille monoparentale" >Famille monoparentale</option>
                <option  data-value="s:Couple" >Couple</option>
                <option  data-value="s:Retraité vivant seul" >Retraité vivant seul</option>
                <option  data-value="s:Couple de retraités" >Couple de retraités</option>
        </select>
    </div>

    <!-- Autres paramètres -->
    <input id="AgeAdulte1" type="number" min="18" max="99" value="35" onchange="recalc_onclick('AgeAdulte1');">
    <input id="AgeAdulte2" type="number" min="0" max="99" value="35" onchange="recalc_onclick('AgeAdulte2');">
    <input id="Revenu1" type="number" min="0" max="250000" value="50000" onchange="recalc_onclick('Revenu1');">
    <input id="Revenu2" type="number" min="0" max="250000" value="0" onchange="recalc_onclick('Revenu2');">
    <div class="enfants span23">
        <select name='NbEnfants' id='NbEnfants' onchange="recalc_onclick('NbEnfants');recalc_NbEnfants();">
            <option  data-value='s:0' selected >Aucun enfant</option>
            <option  data-value='s:1' >Un enfant</option>
            <option  data-value='s:2' >Deux enfants</option>
            <option  data-value='s:3' >Trois enfants</option>
            <option  data-value='s:4' >Quatre enfants</option>
            <option  data-value='s:5' >Cinq enfants</option>
        </select>
    </div>		

    <input id='AgeEnfant1' type='number' value='0' onchange="recalc_onclick('AgeEnfant1')" name='AgeEnfant1'/>
    <input id='Frais1' type='number' value='0' onchange="recalc_onclick('Frais1')" name='Frais1'/>
    <select name='type_garde1' id='type_garde1' onchange="recalc_onclick('type_garde1')">
        <option  data-value='s:Subventionnée' selected >Subventionné</option>
        <option  data-value='s:Non subventionnée' >Non subventionné</option>
    </select>
    
    <input id='AgeEnfant2' type='number' value='0' onchange="recalc_onclick('AgeEnfant2')" name='AgeEnfant2'/>
    <input id='Frais2' type='number' value='0' onchange="recalc_onclick('Frais2')" name='Frais2'/>
    <select name='type_garde2' id='type_garde2' onchange="recalc_onclick('type_garde2')">
        <option  data-value='s:Subventionnée' selected >Subventionné</option>
        <option  data-value='s:Non subventionnée' >Non subventionné</option>
    </select>
    
    <input id='AgeEnfant3' type='number' value='0' onchange="recalc_onclick('AgeEnfant3')" name='AgeEnfant3'/>
    <input id='Frais3' type='number' value='0' onchange="recalc_onclick('Frais3')" name='Frais3'/>
    <select name='type_garde3' id='type_garde3' onchange="recalc_onclick('type_garde3')">
        <option  data-value='s:Subventionnée' selected >Subventionné</option>
        <option  data-value='s:Non subventionnée' >Non subventionné</option>
    </select>
    
    <input id='AgeEnfant4' type='number' value='0' onchange="recalc_onclick('AgeEnfant4')" name='AgeEnfant4'/>
    <input id='Frais4' type='number' value='0' onchange="recalc_onclick('Frais4')" name='Frais4'/>
    <select name='type_garde4' id='type_garde4' onchange="recalc_onclick('type_garde4')">
        <option  data-value='s:Subventionnée' selected >Subventionné</option>
        <option  data-value='s:Non subventionnée' >Non subventionné</option>
    </select>
    
    <input id='AgeEnfant5' type='number' value='0' onchange="recalc_onclick('AgeEnfant5')" name='AgeEnfant5'/>
    <input id='Frais5' type='number' value='0' onchange="recalc_onclick('Frais5')" name='Frais5'/>
    <select name='type_garde5' id='type_garde5' onchange="recalc_onclick('type_garde5')">
        <option  data-value='s:Subventionnée' selected >Subventionné</option>
        <option  data-value='s:Non subventionnée' >Non subventionné</option>
    </select>

    <!-- Champs de résultats avec tous les IDs alignés avec mfq.html -->
    <input type="text" id="RB_old" readonly="readonly" value="0">
    <input type="text" id="RB_new" readonly="readonly" value="0">
    <input type="text" id="RB_ecart" readonly="readonly" value="0">

    <!-- Résultats -->
    <!-- Revenus bruts et disponibles -->
    <input type="text" id="RB_ecart" value="0">
    <input type="text" id="RB_old" value="0">
    <input type="text" id="RB_new" value="0">
    
    <input type="text" id="RD_ecart" value="0">
    <input type="text" id="RD_old" value="0">
    <input type="text" id="RD_new" value="0">

    <!-- Québec -->
    <input type="text" id="QC_impot_st_ecart" value="0">
    <input type="text" id="QC_impot_st_old" value="0">
    <input type="text" id="QC_impot_st_new" value="0">

    <input type="text" id="QC_impot_ecart" value="0">
    <input type="text" id="QC_impot_old" value="0">
    <input type="text" id="QC_impot_new" value="0">

    <input type="text" id="QC_impot_bonif_ecart" value="0">
    <input type="text" id="QC_impot_bonif_old" value="0">
    <input type="text" id="QC_imppot_bonif_new" value="0">

    <input type="text" id="QC_adr_ecart" value="0">
    <input type="text" id="QC_adr_old" value="0">
    <input type="text" id="QC_adr_new" value="0">

    <input type="text" id="QC_sae_ecart" value="0">
    <input type="text" id="QC_sae_old" value="0">
    <input type="text" id="QC_sae_new" value="0">

    <input type="text" id="SFS_ecart" value="0">
    <input type="text" id="SFS_old" value="0">
    <input type="text" id="SFS_new" value="0">

    <input type="text" id="QC_pt_ecart" value="0">
    <input type="text" id="QC_pt_old" value="0">
    <input type="text" id="QC_pt_new" value="0">

    <input type="text" id="QC_sol_ecart" value="0">
    <input type="text" id="QC_sol_old" value="0">
    <input type="text" id="QC_sol_new" value="0">

    <input type="text" id="QC_garde_ecart" value="0">
    <input type="text" id="QC_garde_old" value="0">
    <input type="text" id="QC_garde_new" value="0">

    <input type="text" id="QC_al_ecart" value="0">
    <input type="text" id="QC_al_old" value="0">
    <input type="text" id="QC_al_new" value="0">

    <input type="text" id="QC_medic_ecart" value="0">
    <input type="text" id="QC_medic_old" value="0">
    <input type="text" id="QC_medic_new" value="0">

    <input type="text" id="QC_aines_ecart" value="0">
    <input type="text" id="QC_aines_old" value="0">
    <input type="text" id="QC_aines_new" value="0">

    <input type="text" id="QC_total_ecart" value="0">
    <input type="text" id="QC_total_old" value="0">
    <input type="text" id="QC_total_new" value="0">

    <!-- Canada -->
    <input type="text" id="CA_impot_ecart" value="0">
    <input type="text" id="CA_impot_old" value="0">
    <input type="text" id="CA_impot_new" value="0">

    <input type="text" id="CA_ace_ecart" value="0">
    <input type="text" id="CA_ace_old" value="0">
    <input type="text" id="CA_ace_new" value="0">

    <input type="text" id="CA_tps_ecart" value="0">
    <input type="text" id="CA_tps_old" value="0">
    <input type="text" id="CA_tps_new" value="0">

    <input type="text" id="CA_pfrt_ecart" value="0">
    <input type="text" id="CA_pfrt_old" value="0">
    <input type="text" id="CA_pfrt_new" value="0">

    <input type="text" id="CA_psv_ecart" value="0">
    <input type="text" id="CA_psv_old" value="0">
    <input type="text" id="CA_psv_new" value="0">

    <input type="text" id="CA_medic_ecart" value="0">
    <input type="text" id="CA_medic_old" value="0">
    <input type="text" id="CA_medic_new" value="0">

    <input type="text" id="CA_total_ecart" value="0">
    <input type="text" id="CA_total_old" value="0">
    <input type="text" id="CA_total_new" value="0">

    <!-- Cotisations -->
    <input type="text" id="CA_ae_ecart" value="0">
    <input type="text" id="CA_ae_old" value="0">
    <input type="text" id="CA_ae_new" value="0">

    <input type="text" id="QC_rqap_ecart" value="0">
    <input type="text" id="QC_rqap_old" value="0">
    <input type="text" id="QC_rqap_new" value="0">

    <input type="text" id="CA_rrq_ecart" value="0">
    <input type="text" id="CA_rrq_old" value="0">
    <input type="text" id="CA_rrq_new" value="0">

    <input type="text" id="QC_fss_ecart" value="0">
    <input type="text" id="QC_fss_old" value="0">
    <input type="text" id="QC_fss_new" value="0">

    <input type="text" id="QC_ramq_ecart" value="0">
    <input type="text" id="QC_ramq_old" value="0">
    <input type="text" id="QC_ramq_new" value="0">

    <input type="text" id="Cotisation_ecart" value="0">
    <input type="text" id="Cotisation_old" value="0">
    <input type="text" id="Cotisation_new" value="0">

    <input type="text" id="Frais_garde_ecart" value="0">
    <input type="text" id="Frais_garde_old" value="0">
    <input type="text" id="Frais_garde_new" value="0">

</body>
</html>